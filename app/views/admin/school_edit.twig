{% extends "admin/layout.html" %}

{% block content %}
  <div class="page-header">
    <h1>
      Edit School
      <small>
        <i class="ace-icon fa fa-angle-double-right"></i>
        overview &amp; stats
      </small>
    </h1>
  </div><!-- /.page-header -->

  <div class="row">
    <div class="col-xs-12">
      <!-- PAGE CONTENT BEGINS -->
      <div class="row">
        <div class="col-xs-12">

          <!-- QUICK CREATE -->
          <form class="form-inline" id="quick-create-form" method="POST">
            <input type="hidden" name="csrf_name" value="{{ csrfName }}">
            <input type="hidden" name="csrf_value" value="{{ csrfValue }}">

            <input name="name" type="text" class="input" placeholder="Name" value="{{ entry.name }}" />
            <input name="slug" type="text" class="input" placeholder="Name" value="{{ entry.slug }}" />

            <button type="submit" class="btn btn-info btn-sm">
              <i class="ace-icon fa fa-key bigger-110"></i>Update
            </button>
          </form>

        </div><!-- /.span -->
      </div><!-- /.row -->

      <!-- PAGE CONTENT ENDS -->
    </div><!-- /.col -->
  </div><!-- /.row -->
{% endblock %}

{% block custom_js %}
<script>
  $(document).ready(function() {
    $('.show-details-btn').on('click', function(e) {
      e.preventDefault();
      $(this).closest('tr').next().toggleClass('open');
      $(this).find(ace.vars['.icon']).toggleClass('fa-angle-double-down').toggleClass('fa-angle-double-up');
    });

    $('.quick-edit-form').on('submit', function(e) {
      e.preventDefault();
      var form = $(e.target);
      var pid = form.data('pid');
      // var prefix = 'input[name="polish[' + pid + ']';
      $.post(form.attr('action'), form.serialize(), data => {
        // console.log(prefix + '[image_url]"]');
        // form.find(prefix + '[image_url]"]').value(data.image_url);
        console.log('#thumb-' + pid, $('#thumb-' + pid), data.image_url);
        $('#thumb-' + pid).attr('src', data.image_url);
      }, 'json');
    });
  });
</script>
{% endblock %}